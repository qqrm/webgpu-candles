# ๐๏ธ DDD Architecture - Price Chart WASM

## ๐ ะะฑัะฐั ััััะบัััะฐ

```
src/
โโโ domain/                 # ๐๏ธ ะะะะะะะซะ ะกะะะ
โ   โโโ market_data/       # ะะณัะตะณะฐั: ะัะฝะพัะฝัะต ะดะฐะฝะฝัะต
โ   โ   โโโ entities.rs    # ะกััะฝะพััะธ (Candle, CandleSeries)
โ   โ   โโโ value_objects.rs # Value Objects (Price, Volume, OHLCV)
โ   โ   โโโ repositories.rs # ะะฝัะตััะตะนัั ัะตะฟะพะทะธัะพัะธะตะฒ
โ   โ   โโโ services.rs    # ะะพะผะตะฝะฝัะต ัะตัะฒะธัั (ะฐะฝะฐะปะธะท, ะฒะฐะปะธะดะฐัะธั)
โ   โโโ chart/             # ะะณัะตะณะฐั: ะัะฐัะธะบะธ
โ       โโโ entities.rs    # ะกััะฝะพััะธ (Chart, Indicator, RenderLayer)
โ       โโโ value_objects.rs # Value Objects (Viewport, Color, ChartType)
โ       โโโ services.rs    # ะกะตัะฒะธัั ัะตะฝะดะตัะธะฝะณะฐ
โโโ infrastructure/        # ๐ง ะะะคะะะกะขะะฃะะขะฃะะะซะ ะกะะะ
โ   โโโ websocket/         # WebSocket ัะตะฐะปะธะทะฐัะธะธ
โ   โ   โโโ dto.rs        # DTO ะดะปั ะฒะฝะตัะฝะธั API
โ   โ   โโโ binance_client.rs # Binance WebSocket ะบะปะธะตะฝั
โ   โโโ rendering/         # WebGPU ัะตะฝะดะตัะธะฝะณ
โโโ application/           # ๐ฏ ะกะะะ ะะะะะะะะะะฏ
โ   โโโ use_cases.rs      # Use Cases ะธ ะบะพะพัะดะธะฝะฐัะพัั
โ   โโโ chart_service.rs  # ะกะตัะฒะธัั ะฟัะธะปะพะถะตะฝะธั
โโโ presentation/          # ๐ ะะะะะะะขะะฆะะะะะซะ ะกะะะ
    โโโ wasm_api.rs       # WASM API ะดะปั JavaScript
    โโโ mod.rs            # ะญะบัะฟะพััั
```

## ๐๏ธ Domain Layer - ะฏะดัะพ ัะธััะตะผั

**ะัะธะฝัะธะฟั:**
- โ ะะธะบะฐะบะธั ะฒะฝะตัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน
- โ ะขะพะปัะบะพ ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ ะธ ะฒะฐะปะธะดะฐัะธั  
- โ ะะตะทะฐะฒะธัะธะผัะต, ัะตััะธััะตะผัะต ะผะพะดะตะปะธ
- โ ะะฝะฒะฐัะธะฐะฝัั ะธ ะดะพะผะตะฝะฝัะต ะฟัะฐะฒะธะปะฐ

### ะกััะฝะพััะธ (Entities)
```rust
// ะัะฝะพะฒะฝะฐั ะดะพะผะตะฝะฝะฐั ัััะฝะพััั
pub struct Candle {
    pub timestamp: Timestamp,
    pub ohlcv: OHLCV,
}

// ะะณัะตะณะฐั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะบะพะปะปะตะบัะธะตะน ัะฒะตัะตะน
pub struct CandleSeries {
    candles: Vec<Candle>,
    max_size: usize,
}
```

### Value Objects
```rust
// ะะตะธะทะผะตะฝัะตะผัะต ะพะฑัะตะบัั-ะทะฝะฐัะตะฝะธั
pub struct Price(f32);
pub struct Volume(f32);
pub struct Timestamp(u64);
pub struct Symbol(String);
```

### ะะพะผะตะฝะฝัะต ัะตัะฒะธัั
```rust
// ะกะตัะฒะธัั ะดะปั ะฑะธะทะฝะตั-ะปะพะณะธะบะธ, ะบะพัะพัะฐั ะฝะต ะฟัะธะฝะฐะดะปะตะถะธั ัััะฝะพัััะผ
pub struct MarketAnalysisService;  // SMA, ะฒะพะปะฐัะธะปัะฝะพััั, ัะบัััะตะผัะผั
pub struct DataValidationService;  // ะะฐะปะธะดะฐัะธั ัะฒะตัะตะน ะธ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะตะน
```

## ๐ง Infrastructure Layer - ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

**ะัะธะฝัะธะฟั:**
- โ ะะตะฐะปะธะทัะตั ะธะฝัะตััะตะนัั ะธะท domain
- โ ะกะพะดะตัะถะธั ัะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ (WebSocket, WebGPU)
- โ ะะตะณะบะพ ะฟะพะดะผะตะฝัะตััั ะดะปั ัะตััะธัะพะฒะฐะฝะธั
- โ DTO ะดะปั ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธั ะฒะฝะตัะฝะธั ะดะฐะฝะฝัั

### WebSocket Infrastructure
```rust
// DTO ะดะปั Binance API
pub struct BinanceKlineData { ... }

// ะะตะฐะปะธะทะฐัะธั ัะตะฟะพะทะธัะพัะธั
impl MarketDataRepository for BinanceWebSocketClient {
    fn subscribe_to_updates(...) -> Result<(), JsValue> { ... }
}
```

## ๐ฏ Application Layer - ะะพะพัะดะธะฝะฐัะธั

**ะัะธะฝัะธะฟั:**
- โ Use Cases ะดะปั ะฑะธะทะฝะตั-ััะตะฝะฐัะธะตะฒ
- โ ะะพะพัะดะธะฝะฐัะธั ะผะตะถะดั domain ะธ infrastructure
- โ ะฃะฟัะฐะฒะปะตะฝะธะต ััะฐะฝะทะฐะบัะธัะผะธ ะธ ัะพััะพัะฝะธะตะผ
- โ ะะธะฝะธะผะฐะปัะฝะฐั ะปะพะณะธะบะฐ - ัะพะปัะบะพ ะพัะบะตัััะฐัะธั

### Use Cases
```rust
// ะะพะดะบะปััะตะฝะธะต ะบ ะดะฐะฝะฝัะผ
pub struct ConnectToMarketDataUseCase<T: MarketDataRepository> { ... }

// ะะฝะฐะปะธะท ััะฝะบะฐ  
pub struct AnalyzeMarketDataUseCase { ... }

// ะะตะฝะดะตัะธะฝะณ ะณัะฐัะธะบะฐ
pub struct RenderChartUseCase { ... }

// ะะพะพัะดะธะฝะฐัะพั ะฒัะตั ััะตะฝะฐัะธะตะฒ
pub struct ChartApplicationCoordinator<T> { ... }
```

## ๐ Presentation Layer - API ะดะปั ะฒะตะฑะฐ

**ะัะธะฝัะธะฟั:**
- โ ะะธะฝะธะผะฐะปัะฝะฐั ะปะพะณะธะบะฐ - ัะพะปัะบะพ ะผะพัั ะบ application
- โ WASM API ะดะปั JavaScript
- โ ะัะตะพะฑัะฐะทะพะฒะฐะฝะธะต ัะธะฟะพะฒ ะดะปั ะฒะตะฑะฐ
- โ ะะฑัะฐัะฝะฐั ัะพะฒะผะตััะธะผะพััั

### WASM API
```rust
#[wasm_bindgen]
pub struct PriceChartApi {
    // ะะฝัััะตะฝะฝะตะต ัะพััะพัะฝะธะต ัะบัััะพ ะพั JS
}

#[wasm_bindgen]
impl PriceChartApi {
    #[wasm_bindgen(js_name = connectToSymbol)]
    pub fn connect_to_symbol(&mut self, symbol: &str, interval: &str) -> Result<(), JsValue> {
        // ะะตะปะตะณะธััะตั ะฒ application ัะปะพะน
    }
}
```

## ๐ ะะพัะพะบ ะดะฐะฝะฝัั

```
JavaScript API
       โ
๐ Presentation Layer (WASM API)
       โ
๐ฏ Application Layer (Use Cases)
       โ
๐๏ธ Domain Layer (Entities, Services)
       โ
๐ง Infrastructure Layer (WebSocket, WebGPU)
       โ
External APIs (Binance, Browser)
```

## โ ะัะตะธะผััะตััะฒะฐ ะฐััะธัะตะบัััั

1. **ะขะตััะธััะตะผะพััั** - Domain ัะปะพะน ัะตััะธััะตััั ะธะทะพะปะธัะพะฒะฐะฝะฝะพ
2. **ะะตะทะฐะฒะธัะธะผะพััั** - ะะธะทะฝะตั-ะปะพะณะธะบะฐ ะฝะต ะทะฐะฒะธัะธั ะพั ัะตัะฝะพะปะพะณะธะน
3. **ะะพะดะผะตะฝัะตะผะพััั** - Infrastructure ะปะตะณะบะพ ะทะฐะผะตะฝะธัั (mock, ะดััะณะฐั ะฑะธัะถะฐ)
4. **ะงะธัะฐะตะผะพััั** - ะงะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ะพัะฒะตัััะฒะตะฝะฝะพััะธ
5. **ะะฐััะธััะตะผะพััั** - ะะพะฒัะต ัะธัะธ ะดะพะฑะฐะฒะปััััั ะฒ ะฟัะฐะฒะธะปัะฝัะต ัะปะพะธ

## ๐ ะะฐะปัะฝะตะนัะตะต ัะฐะทะฒะธัะธะต

- [ ] ะะพะฑะฐะฒะธัั ะฑะพะปััะต ะฑะธัะถ ะฒ infrastructure
- [ ] ะะฐััะธัะธัั ะดะพะผะตะฝะฝัะต ัะตัะฒะธัั (ะฑะพะปััะต ะธะฝะดะธะบะฐัะพัะพะฒ)
- [ ] ะฃะปัััะธัั ะบะพะพัะดะธะฝะฐัะพัั ะฒ application
- [ ] ะะพะฑะฐะฒะธัั ัะพะฑััะธั (Event Sourcing)
- [ ] ะะตะฐะปะธะทะพะฒะฐัั CQRS ะฟะฐััะตัะฝ 